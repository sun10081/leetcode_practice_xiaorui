# -*- coding:utf-8 -*-
"""
@author: guoxiaorui
@file: 2_sum_of_subarray_ranges
@time: 2021/12/12 11:05 上午
@desc: 
"""
import datetime
from typing import List


class Solution:
    def subArrayRanges(self, nums: List[int]) -> int:
        n = len(nums)
        dp = [0] * n
        for i in range(1, n):
            dp[i] += dp[i - 1]
            for j in range(0, i + 1):
                tmp_array = nums[j:i + 1]
                dp[i] += max(tmp_array) - min(tmp_array)
        return dp[-1]

    def subArrayRanges2(self, nums: List[int]) -> int:
        n = len(nums)
        ans = 0
        # second = 0
        for i in range(1, n):
            max_value = 0
            min_value = 0
            for j in range(0, i + 1):
                tmp_array = nums[j:i + 1]
                if j == 0:
                    max_value = max(tmp_array)
                    min_value = min(tmp_array)
                if j > 0:
                    if nums[j - 1] >= max_value:
                        max_value = max(tmp_array)
                    if nums[j - 1] <= min_value:
                        min_value = min(tmp_array)
                if len(tmp_array) > 1:
                    ans += max_value - min_value
            # first = second
        return ans

    def subArrayRanges3(self, nums: List[int]) -> int:
        n = len(nums)
        ans = 0
        for i in range(n):
            m = nums[i]
            M = nums[i]
            for j in range(i, n):
                m = min(m, nums[j])
                M = max(M, nums[j])
                ans += M - m
        return ans


if __name__ == '__main__':
    # nums = [2397, 22137, 98524, 73159, 69553, -84665, 34784, 26515, 60540, -28932, 18685, 31496, -18734, 44494, -51779,
    #         33440, -84581, 59154, -76903, -22335, 75134, 61847, 72723, 80115, 32617, 23713, 93371, -15888, -98730,
    #         -10270, -53690, -6388, 74194, 59486, 35806, -70186, -8054, 19060, -5542, 31221, -1035, -29154, 62712, 42136,
    #         -58258, 37642, 30157, 26228, 92495, 49993, -37993, 81123, 30528, 17958, -37704, 19330, 87339, 10806, 46698,
    #         -66218, -66504, 76812, -50131, 48021, 93922, 43882, 82766, 67007, -65252, 1506, -49927, 11866, 53744,
    #         -46263, -53207, 12065, -96010, -93275, -81876, 5227, -41468, -94361, -35763, -23855, 86294, -97504, -71393,
    #         -25169, -57428, -41591, -6348, 62733, 40376, -63304, -1797, -43344, 35564, -10589, 11030, -76825, -13625,
    #         -71628, -23381, 86909, 63140, 26668, 82094, 91025, 43146, -78343, -39194, -65857, 15437, -40097, -79565,
    #         -39854, -84830, 6740, 70604, 83611, 91106, -21016, -27597, -81797, 60140, -73547, 64711, 39643, -29677,
    #         66231, 56542, -85703, -23429, -76622, -63908, 91845, 96807, 94187, -88890, 29971, 84680, 12314, 81993,
    #         -24032, 80097, -58771, -20988, 35593, 6410, 38727, -27640, -67330, -24665, -47425, -38798, 24639, 7143,
    #         -76970, -9421, -67768, -96110, 23902, 17637, -74972, -65063, 32150, -14284, -14390, -4851, -33863, 60394,
    #         -91537, -85972, -86445, 41100, 72186, 1597, 63250, -57022, -97765, 61285, -86013, -63520, -6490, 18542,
    #         81005, -77342, 97014, -32797, -48790, -9622, 77701, -13024, 34075, 95394, -96924, 85757, -122, 47598, 96983,
    #         -69788, -78951, -18343, -5301, -8649, 77592, 52818, -45797, -13569, -80367, -56646, -6467, -81430, -78609,
    #         -79510, 12885, -16895, 85021, 53304, 18204, -48481, 67198, -18560, 5057, 88025, 24762, -38391, 90900,
    #         -22658, -90520, 27199, -44707, 60121, -5593, 97626, 96521, 19362, 2069, 69997, 62783, 28050, 6087, -67871,
    #         -60228, 84356, 58564, 89562, -41960, 52476, 29763, -26467, 79046, 65672, 39166, -30446, 6041, -46044, 96288,
    #         -98021, 1141, 50673, -65403, -33573, 72681, -45763, -31485, -1606, 16438, 2635, -77294, -36102, 99410,
    #         -14948, 17773, 57126, -44689, -83101, 56965, 49585, -50766, -18643, -9518, -75144, -12812, -9323, -83277,
    #         10684, -4701, -19516, 6347, -80617, 76760, -52605, -7469, -34376, -64921, 3623, -18283, 55514, 87188,
    #         -82570, -54007, -89585, -17282, -84294, 21882, 98107, -58094, 98368, -84244, -5849, -99909, -43764, 57037,
    #         70644, 77535, 44664, 91084, 12353, 22728, 37466, 31480, 85374, 24509, 67927, 66172, 24607, -96753, -93358,
    #         38121, 38885, 84606, -73491, -24031, 51664, 1266, -79068, -29760, 29741, 15400, -22198, 45576, -23634,
    #         23802, -21701, 40975, 91754, 10013, 55262, -94338, -76918, 47410, -21374, -88059, -24256, -34198, -33430,
    #         75479, -49043, 4151, 48319, -14089, -46328, -44529, 56438, -95366, -99071, 39843, 3044, -18708, -37167,
    #         6607, 97564, 33098, 92147, 35954, 39541, -3331, 20705, -96636, 564, 73843, -84770, 15140, -58354, 57833,
    #         88279, 21632, -34097, 4171, 17659, 9123, -21227, -90265, 3385, -12025, -70446, -96069, -59132, 11261, 8387,
    #         -89735, 6019, -22915, 39902, -54528, 4866, -62811, -31945, 95982, 68544, 45892, -67559, -32773, 15772,
    #         83571, -59596, -3195, -36885, 10191, -66561, -55620, 74925, 68716, -74827, -84881, 93317, -13487, 73966,
    #         66944, -82944, 93342, -45886, -60754, -67132, -15584, -44768, 1537, 47545, 85409, 95278, 62183, -56409,
    #         17606, 19226, -2575, -87282, 17091, -80091, 69415, 24771, 88827, -63938, 4637, 87352, -68172, 60846, -61961,
    #         -46225, -3392, 39936, -49302, -73548, -79978, -51511, 28714, 95864, 50122, -69498, -44992, 52892, -78850,
    #         89854, -5684, -73507, 30777, 20220, -73538, -89578, 37283, 68865, -76690, -74611, 19348, -50234, -58066,
    #         19095, 81386, 51170, -72776, -18347, -51530, 82555, -45156, -53635, -56512, 8626, -55951, -90031, -91318,
    #         39848, -75813, -79614, -30155, 26990, 19479, 89704, -18884, 37485, -19356, 24103, -9976, 37905, 54245,
    #         -14418, -97978, 26439, 62919, 23123, -1386, 95057, -70970, -60273, 83691, 10106, 28543, -26156, 76578,
    #         19904, 86628, 32280, -54035, 86121, 53514, 32338, -77982, 51116, -64356, 30466, 22112, -59108, 98818,
    #         -68540, 84343, -27275, -26711, 86088, 62567, 7590, -99108, 28953, -47674, -78981, 68321, 92924, -52630,
    #         71245, -41222, -4949, -88680, 77705, 44775, -49644, -24648, 6138, -22357, -18916, 68630, -10210, -26361,
    #         -59103, 26346, -25956, -43654, -69831, 21774, -37286, 70593, 90690, 79937, -38835, 60444, -96494, 44746,
    #         81180, -68290, 46936, 7658, -40247, -52542, 91906, -52224, 65125, -27837, 50772, -91957, -10598, 2976,
    #         54193, -2279, -79326, -85232, 76980, -85692, 62963, 58729, 61395, -20747, 17663, 97296, 61178, 52127,
    #         -88932, 40076, -94997, -29870, -9707, -8700, 19952, 13568, -37262, -42545, 8720, 9084, -82966, 51708, 60081,
    #         -16567, -85251, -78243, -29201, 90606, -75876, 42925, 20340, -28974, 32229, 84535, -78279, -32491, -93279,
    #         15061, -39394, -75218, -10505, -38212, -41150, -40782, -98917, 92275, -70598, -96231, -714, -67315, -4450,
    #         -50242, 94507, 86056, -40927, -90389, -97431, -97480, 88019, 45950, 5418, 75875, 22184, 9518, -15071, 7468,
    #         67571, 98926, -6548, 30780, 5143, 9773, 72919, 5992, -40963, -15701, 91146, -30094, -25170, 44523, 21273,
    #         70545, 19481, 80628, -32538, -58045, -45043, 72951, -18267, 59361, -75495, 23347, 90868, -46425, -57221,
    #         91598, 84344, 55641, -55739, -87728, 75829, 35748, -47404, 8035, -62942, 26291, -52042, -83112, -35169,
    #         74250, 84048, 35174, -41184, 59918, 10268, 20083, 80871, 26749, 35225, 21752, 78914, -81201, -1870, 82362,
    #         -2613, 94499, 48121, -83240, 41928, -96118, -87165, 59850, 67930, 65388, -33155, 20872, 80692, -18379,
    #         66905, 70509, -23652, 87620, -4169, 27777, 2061, 49610, 31836, 54776, -17425, -13673, 59087, -13740, 57127,
    #         -82556, -70646, 10539, 18766, -76415, -4938, 50701, 31746, -36209, -10249, 55051, -1557, -7455, -19343,
    #         35559, -60986, -16026, -57157, 31441, -60132, 31804, -50373, 68331, -7907, -82933, -58292, 34525, 86440,
    #         -11156, 42914, 69316, 25614, 53708, 80144, 65298, 59323, 32654, 86089, 78341, -97409, -62172, 54772, 38438,
    #         -23291, -47950, -63074, 82182, 8516, -68307, -46738, 49342, 84386, 88763, -8062, 55012, -49161, 32523,
    #         -55898, -83377, -39968, -89318, -58800, -16308, -76267, -66268, 7808, 62915, 20896, 60757, 52753, 31706,
    #         -29183, -53147, -26932, -75788, -55607, -41219, 22627, -74134, 64378, -34793, 64400, 69010, -13066, 85424,
    #         -73469, 66688, -96751, 10868, -346, 91911, -65679, -99797, 66637, -13598, -22809, -65972, -11493, -99603,
    #         -53220, 15458, -68882, 74379, 63914, 56785, -26225, 5275, 96814, 37174, -32230, -60309, -52075, -26568,
    #         -64666, 9240, 75077, 19542, -58020, -98635, 42175, 48713, -29105, 36487, -47211, -90298, -66955, 82893,
    #         95497, 64272, -13987, 61171, 20035, 97723, -29639, -35134, -26603, 70894, 82564, 62186, -35301, 96036,
    #         64055]

    nums = [1, 2, 3, 4]

    s = Solution()
    time1 = datetime.datetime.now()
    print(s.subArrayRanges3(nums))
    time2 = datetime.datetime.now()
    print(time2 - time1)
